define(function(require,exports,module){var e,r,t=module.uri||"",i=(t.substring(0,t.lastIndexOf("/")+1),{}.hasOwnProperty),n=function(e,r){function t(){this.constructor=e}for(var n in r)i.call(r,n)&&(e[n]=r[n]);return t.prototype=r.prototype,e.prototype=new t,e.__super__=r.prototype,e};r=require("ace/worker/worker_client").WorkerClient,e=function(e){function r(e,r){this.workerClient=e,this.id=r,this.$sendDeltaQueue=this.$sendDeltaQueue.bind(this),this.changeListener=this.changeListener.bind(this),this.onMessage=this.onMessage.bind(this),this.workerClient.on("message",function(e){return function(r){return r.data.identifier===e.id?e.onMessage(r):void 0}}(this)),this.callbackId=1,this.callbacks={}}return n(r,e),r.prototype.send=function(e,r){return this.workerClient.$worker.postMessage({command:e,identifier:this.id,args:r})},r.prototype.emit=function(e,r){return this.workerClient.$worker.postMessage({event:e,identifier:this.id,data:{data:r.data}})},r}(r),module.exports=e});