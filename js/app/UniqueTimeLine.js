define(function(){var e;return e=function(){function e(){this.length=0,this.head=new t,this.elems=new t,this.head.prev=this.elems,this.elems.next=this.head,this.now=this.head,this.set={},this.temporary=null}var t;return t=function(){function e(e,t,o){var n,r;this.e=e,this.next=t,this.prev=o,null!=(n=this.prev)&&(n.next=this),null!=(r=this.next)&&(r.prev=this)}return e.prototype.remove=function(){var e;return e=[this.next,this.prev],this.prev.next=e[0],this.next.prev=e[1],e},e}(),e.prototype.push=function(e){var o,n;return n=new t(e,this.head,this.head.prev),o=this.set[e],null!=o?o.remove():this.length++,this.set[e]=n,this.goNewest()},e.prototype.temp=function(e){return this.temporary=e,this.goNewest()},e.prototype.goBack=function(){return null!=this.now.prev.e&&(this.now=this.now.prev),this.curr()},e.prototype.goForward=function(){var e;return e=this.curr(),null!=this.now.e&&(this.now=this.now.next),this.curr()},e.prototype.goOldest=function(){return this.now=this.elems.next,this.curr()},e.prototype.goNewest=function(){return this.now=this.head,this.curr()},e.prototype.isInPast=function(){return this.now!==this.head},e.prototype.curr=function(){return this.now===this.head?this.temporary:this.now.e},e.prototype.newest=function(e){var t,o,n,r,i;for(n=this.head,r=[],o=i=0;(e>=0?e>i:i>e)&&(t=n.prev.e);o=e>=0?++i:--i)r.push(t),n=n.prev;return r.reverse()},e.prototype.from=function(e){var t,o,n;for(o=0,n=e.length;n>o;o++)t=e[o],this.push(t);return this.goNewest()},e.prototype.size=function(){return this.length},e}()});