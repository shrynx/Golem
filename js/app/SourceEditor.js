define(function(require,exports,module){{var e,t,n,r,i,o,s,a,u,l,c=module.uri||"";c.substring(0,c.lastIndexOf("/")+1)}n=require("React"),u=(a=require("hyper"))._div,e=require("ejquery"),o=require("ace/undomanager"),s=require("./AceEditor"),t=require("./Memory"),r=require("./SetIntervalMixin"),l=require,module.exports=a(i=function(){function t(){}return t.prototype.load=function(e){var t,n,r,i,s,a;return s=e.value,r=e.selection,t=e.moduleName,n=e.scroll,i=this.editor.session,i.getUndoManager().execute&&(this.undoStore[this.props.module.moduleName]=i.getUndoManager()),i.setUndoManager(i.$defaultUndoManager),i.getMode().setContent(s,r,t),i.setUndoManager(this.undoStore[t]||("function"==typeof(a=i.getMode()).createUndoManager?a.createUndoManager():void 0)||new o),n?(i.setScrollTop(n.top),i.setScrollLeft(n.left)):void 0},t.prototype.serializedModule=function(){return{value:this.editor.getValue(),mode:"teascript",selection:this.editor.getSelectionRange(),cursor:this.editor.getCursorPosition(),scroll:{top:this.editor.session.getScrollTop(),left:this.editor.session.getScrollLeft()}}},t.prototype.mode=function(){return this.editor.session.getMode()},t.prototype.forceResize=function(){return this.editor.resize()},t.prototype.getInitialState=function(){return{backgroundColor:"#222"}},t.prototype.handleMouseEnter=function(){return this.editor.focus(),this.props.onFocus()},t.prototype._getEditorNode=function(){return this.refs.ace.getDOMNode()},t.prototype.componentWillReceiveProps=function(e){var t,module;return t=e.focus,module=e.module,t&&!this.props.focus&&this.editor.focus(),module&&module.moduleName!==this.props.module.moduleName?this.load(module):void 0},t.prototype.componentDidMount=function(){var t;return this.editor=t=s.edit(this._getEditorNode(),this.props.mode,"ace/theme/tea"),t.setFontSize(13),t.renderer.setScrollMargin(2,2),t.setHighlightActiveLine(!1),t.session.setTabSize(2),t.setShowPrintMargin(!1),t.setOption("scrollPastEnd",!0),this.undoStore={},t.session.on("change",function(e){return function(){return e.props.onChange()}}(this)),t.session.getSelection().on("changeSelection",function(e){return function(){return e.props.onChange()}}(this)),t.renderer.on("themeLoaded",function(t){return function(){return t.setState({backgroundColor:e(t._getEditorNode()).css("background-color")})}}(this)),t.commands.addCommand({name:"leave",bindKey:{win:"Esc",mac:"Esc"},exec:this.props.onLeave}),this.load(this.props.module),window.addEventListener("resize",function(e){return function(){return e.editor.resize()}}(this))},t.prototype.render=function(){return u({className:"areaBorder",style:{backgroundColor:this.state.backgroundColor,"padding-left":0,"padding-right":20},onMouseEnter:this.handleMouseEnter},u({ref:"ace",style:{width:"100%",height:this.props.height}}))},t}())});