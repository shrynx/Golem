define(function(require,exports,module){var e,t,n,i,r,o,s,a=module.uri||"",l=(a.substring(0,a.lastIndexOf("/")+1),{}.hasOwnProperty),c=function(e,t){function n(){this.constructor=e}for(var i in t)l.call(t,i)&&(e[i]=t[i]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e};t=require("ace/worker/mirror").Mirror,e=require("./coffee-script/lexer").Lexer,s=require("./coffee-script/parser").parser,o=require("./coffee-script/nodes"),i=require("./coffee-script/helpers"),window.addEventListener=function(){},r=new e,s.lexer={lex:function(){var e,t;return t=this.tokens[this.pos++],t?(e=t[0],this.yytext=t[1],this.yylloc=t[2],this.yylineno=this.yylloc.first_line):e="",e},setInput:function(e){return this.tokens=e,this.pos=0},upcomingInput:function(){return""}},s.yy=o,n=function(e,t){return null==t&&(t={bare:!0}),s.parse(r.tokenize(e,t)).compile(t)},s.yy.parseError=function(e,t){var n;return n=t.token,e="unexpected "+(1===n?"end of input":n),i.throwSyntaxError(e,s.lexer.yylloc)},exports.Worker=function(e){function t(e){t.__super__.constructor.call(this,e),this.setTimeout(250)}return c(t,e),t.prototype.onUpdate=function(){var e,t,i;i=this.doc.getValue();try{return this.sender.emit("ok",{result:n(i)})}catch(r){e=r,t=e.location,t&&this.sender.emit("error",{row:t.first_line,column:t.first_column,endRow:t.last_line,endColumn:t.last_column,text:e.message,type:"error"})}},t}(t)});