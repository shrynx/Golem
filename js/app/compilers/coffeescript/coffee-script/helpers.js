define(function(require,exports,module){{var e,t,n,r,i,o,s=module.uri||"";s.substring(0,s.lastIndexOf("/")+1)}exports.starts=function(e,t,n){return t===e.substr(n,t.length)},exports.ends=function(e,t,n){var r;return r=t.length,t===e.substr(e.length-r-(n||0),r)},exports.repeat=i=function(e,t){var n;for(n="";t>0;)1&t&&(n+=e),t>>>=1,e+=e;return n},exports.compact=function(e){var t,n,r,i;for(i=[],n=0,r=e.length;r>n;n++)t=e[n],t&&i.push(t);return i},exports.count=function(e,t){var n,r;if(n=r=0,!t.length)return 1/0;for(;r=1+e.indexOf(t,r);)n++;return n},exports.merge=function(e,n){return t(t({},e),n)},t=exports.extend=function(e,t){var n,r;for(n in t)r=t[n],e[n]=r;return e},exports.flatten=n=function(e){var t,r,i,o;for(r=[],i=0,o=e.length;o>i;i++)t=e[i],t instanceof Array?r=r.concat(n(t)):r.push(t);return r},exports.del=function(e,t){var n;return n=e[t],delete e[t],n},exports.last=r=function(e,t){return e[e.length-(t||0)-1]},exports.some=null!=(o=Array.prototype.some)?o:function(e){var t,n,r;for(n=0,r=this.length;r>n;n++)if(t=this[n],e(t))return!0;return!1},exports.invertLiterate=function(e){var t,n,r;return r=!0,n=function(){var n,i,o,s;for(o=e.split("\n"),s=[],n=0,i=o.length;i>n;n++)t=o[n],s.push(r&&/^([ ]{4}|[ ]{0,3}\t)/.test(t)?t:(r=/^\s*$/.test(t))?t:"# "+t);return s}(),n.join("\n")},e=function(e,t){return t?{first_line:e.first_line,first_column:e.first_column,last_line:t.last_line,last_column:t.last_column}:e},exports.addLocationDataFn=function(t,n){return function(r){return"object"==typeof r&&r.updateLocationDataIfMissing&&r.updateLocationDataIfMissing(e(t,n)),r}},exports.locationDataToString=function(e){var t;return"2"in e&&"first_line"in e[2]?t=e[2]:"first_line"in e&&(t=e),t?""+(t.first_line+1)+":"+(t.first_column+1)+"-"+(""+(t.last_line+1)+":"+(t.last_column+1)):"No location data"},exports.baseFileName=function(e,t,n){var r,i;return null==t&&(t=!1),null==n&&(n=!1),i=n?/\\|\//:/\//,r=e.split(i),e=r[r.length-1],t?(r=e.split("."),r.pop(),"coffee"===r[r.length-1]&&r.length>1&&r.pop(),r.join(".")):e},exports.isCoffee=function(e){return/\.((lit)?coffee|coffee\.md)$/.test(e)},exports.isLiterate=function(e){return/\.(litcoffee|coffee\.md)$/.test(e)},exports.throwSyntaxError=function(e,t){var n;throw null==t.last_line&&(t.last_line=t.first_line),null==t.last_column&&(t.last_column=t.first_column),n=new SyntaxError(e),n.location=t,n},exports.prettyErrorMessage=function(e,t,n,r){var o,s,a,l,c,u,h,d,p,f,m;return e.location?(m=e.location,c=m.first_line,l=m.first_column,h=m.last_line,u=m.last_column,o=n.split("\n")[c],f=l,a=c===h?u+1:o.length,d=i(" ",f)+i("^",a-f),r&&(s=function(e){return"[1;31m"+e+"[0m"},o=o.slice(0,f)+s(o.slice(f,a))+o.slice(a),d=s(d)),p=""+t+":"+(c+1)+":"+(l+1)+": error: "+e.message+"\n"+o+"\n"+d):e.stack||""+e}});