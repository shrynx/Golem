define("ace/snippets",["require","exports","module","ace/lib/oop","ace/lib/event_emitter","ace/lib/lang","ace/range","ace/anchor","ace/keyboard/hash_handler","ace/tokenizer","ace/lib/dom","ace/editor"],function(require,exports){"use strict";var e=require("./lib/oop"),t=require("./lib/event_emitter").EventEmitter,n=require("./lib/lang"),r=require("./range").Range,i=require("./anchor").Anchor,o=require("./keyboard/hash_handler").HashHandler,s=require("./tokenizer").Tokenizer,a=r.comparePoints,u=function(){this.snippetMap={},this.snippetNameMap={}};(function(){e.implement(this,t),this.getTokenizer=function(){function e(e,t,n){return e=e.substr(1),/^\d+$/.test(e)&&!n.inFormatString?[{tabstopId:parseInt(e,10)}]:[{text:e}]}function t(e){return"(?:[^\\\\"+e+"]|\\\\.)"}return u.$tokenizer=new s({start:[{regex:/:/,onMatch:function(e,t,n){return n.length&&n[0].expectIf?(n[0].expectIf=!1,n[0].elseBranch=n[0],[n[0]]):":"}},{regex:/\\./,onMatch:function(e,t,n){var r=e[1];return"}"==r&&n.length?e=r:-1!="`$\\".indexOf(r)?e=r:n.inFormatString&&("n"==r?e="\n":"t"==r?e="\n":-1!="ulULE".indexOf(r)&&(e={changeCase:r,local:r>"a"})),[e]}},{regex:/}/,onMatch:function(e,t,n){return[n.length?n.shift():e]}},{regex:/\$(?:\d+|\w+)/,onMatch:e},{regex:/\$\{[\dA-Z_a-z]+/,onMatch:function(t,n,r){var i=e(t.substr(1),n,r);return r.unshift(i[0]),i},next:"snippetVar"},{regex:/\n/,token:"newline",merge:!1}],snippetVar:[{regex:"\\|"+t("\\|")+"*\\|",onMatch:function(e,t,n){n[0].choices=e.slice(1,-1).split(",")},next:"start"},{regex:"/("+t("/")+"+)/(?:("+t("/")+"*)/)(\\w*):?",onMatch:function(e,t,n){var r=n[0];return r.fmtString=e,e=this.splitRegex.exec(e),r.guard=e[1],r.fmt=e[2],r.flag=e[3],""},next:"start"},{regex:"`"+t("`")+"*`",onMatch:function(e,t,n){return n[0].code=e.splice(1,-1),""},next:"start"},{regex:"\\?",onMatch:function(e,t,n){n[0]&&(n[0].expectIf=!0)},next:"start"},{regex:"([^:}\\\\]|\\\\.)*:?",token:"",next:"start"}],formatString:[{regex:"/("+t("/")+"+)/",token:"regex"},{regex:"",onMatch:function(e,t,n){n.inFormatString=!0},next:"start"}]}),u.prototype.getTokenizer=function(){return u.$tokenizer},u.$tokenizer},this.tokenizeTmSnippet=function(e,t){return this.getTokenizer().getLineTokens(e,t).tokens.map(function(e){return e.value||e})},this.$getDefaultValue=function(e,t){if(/^[A-Z]\d+$/.test(t)){var n=t.substr(1);return(this.variables[t[0]+"__"]||{})[n]}if(/^\d+$/.test(t))return(this.variables.__||{})[t];if(t=t.replace(/^TM_/,""),e){var r=e.session;switch(t){case"CURRENT_WORD":var i=r.getWordRange();case"SELECTION":case"SELECTED_TEXT":return r.getTextRange(i);case"CURRENT_LINE":return r.getLine(e.getCursorPosition().row);case"PREV_LINE":return r.getLine(e.getCursorPosition().row-1);case"LINE_INDEX":return e.getCursorPosition().column;case"LINE_NUMBER":return e.getCursorPosition().row+1;case"SOFT_TABS":return r.getUseSoftTabs()?"YES":"NO";case"TAB_SIZE":return r.getTabSize();case"FILENAME":case"FILEPATH":return"";case"FULLNAME":return"Ace"}}},this.variables={},this.getVariableValue=function(e,t){return this.variables.hasOwnProperty(t)?this.variables[t](e,t)||"":this.$getDefaultValue(e,t)||""},this.tmStrFormat=function(e,t,n){var r=t.flag||"",i=t.guard;i=new RegExp(i,r.replace(/[^gi]/,""));var o=this.tokenizeTmSnippet(t.fmt,"formatString"),s=this,a=e.replace(i,function(){s.variables.__=arguments;for(var e=s.resolveVariables(o,n),t="E",r=0;r<e.length;r++){var i=e[r];if("object"==typeof i)if(e[r]="",i.changeCase&&i.local){var a=e[r+1];a&&"string"==typeof a&&(e[r]="u"==i.changeCase?a[0].toUpperCase():a[0].toLowerCase(),e[r+1]=a.substr(1))}else i.changeCase&&(t=i.changeCase);else"U"==t?e[r]=i.toUpperCase():"L"==t&&(e[r]=i.toLowerCase())}return e.join("")});return this.variables.__=null,a},this.resolveVariables=function(e,t){function n(t){var n=e.indexOf(t,i+1);-1!=n&&(i=n)}for(var r=[],i=0;i<e.length;i++){var o=e[i];if("string"==typeof o)r.push(o);else{if("object"!=typeof o)continue;if(o.skip)n(o);else{if(o.processed<i)continue;if(o.text){var s=this.getVariableValue(t,o.text);s&&o.fmtString&&(s=this.tmStrFormat(s,o)),o.processed=i,null==o.expectIf?s&&(r.push(s),n(o)):s?o.skip=o.elseBranch:n(o)}else null!=o.tabstopId?r.push(o):null!=o.changeCase&&r.push(o)}}}return r},this.insertSnippetForSelection=function(e,t){function n(e){for(var t=[],n=0;n<e.length;n++){var r=e[n];if("object"==typeof r){if(c[r.tabstopId])continue;var i=e.lastIndexOf(r,n-1);r=t[i]||{tabstopId:r.tabstopId}}t[n]=r}return t}var r=e.getCursorPosition(),i=e.session.getLine(r.row),o=e.session.getTabString(),s=i.match(/^\s*/)[0];r.column<s.length&&(s=s.slice(0,r.column));var a=this.tokenizeTmSnippet(t);a=this.resolveVariables(a,e),a=a.map(function(e){return"\n"==e?e+s:"string"==typeof e?e.replace(/\t/g,o):e});var u=[];a.forEach(function(e,t){if("object"==typeof e){var n=e.tabstopId,r=u[n];if(r||(r=u[n]=[],r.index=n,r.value=""),-1===r.indexOf(e)){r.push(e);var i=a.indexOf(e,t+1);if(-1!==i){var o=a.slice(t+1,i),s=o.some(function(e){return"object"==typeof e});s&&!r.value?r.value=o:!o.length||r.value&&"string"==typeof r.value||(r.value=o.join(""))}}}}),u.forEach(function(e){e.length=0});for(var c={},p=0;p<a.length;p++){var d=a[p];if("object"==typeof d){var f=d.tabstopId,h=a.indexOf(d,p+1);if(c[f])c[f]===d&&(c[f]=null);else{var m=u[f],g="string"==typeof m.value?[m.value]:n(m.value);g.unshift(p+1,Math.max(0,h-p)),g.push(d),c[f]=d,a.splice.apply(a,g),-1===m.indexOf(d)&&m.push(d)}}}var v=0,y=0,b="";a.forEach(function(e){"string"==typeof e?("\n"===e[0]?(y=e.length-1,v++):y+=e.length,b+=e):e.start?e.end={row:v,column:y}:e.start={row:v,column:y}});var x=e.getSelectionRange(),_=e.session.replace(x,b),w=new l(e),T=e.inVirtualSelectionMode&&e.selection.index;w.addTabstops(u,x.start,_,T)},this.insertSnippet=function(e,t){var n=this;return e.inVirtualSelectionMode?n.insertSnippetForSelection(e,t):(e.forEachSelection(function(){n.insertSnippetForSelection(e,t)},null,{keepOrder:!0}),void(e.tabstopManager&&e.tabstopManager.tabNext()))},this.$getScope=function(e){var t=e.session.$mode.$id||"";if(t=t.split("/").pop(),"html"===t||"php"===t){"php"!==t||e.session.$mode.inlinePhp||(t="html");var n=e.getCursorPosition(),r=e.session.getState(n.row);"object"==typeof r&&(r=r[0]),r.substring&&("js-"==r.substring(0,3)?t="javascript":"css-"==r.substring(0,4)?t="css":"php-"==r.substring(0,4)&&(t="php"))}return t},this.getActiveScopes=function(e){var t=this.$getScope(e),n=[t],r=this.snippetMap;return r[t]&&r[t].includeScopes&&n.push.apply(n,r[t].includeScopes),n.push("_"),n},this.expandWithTab=function(e,t){var n=this,r=e.forEachSelection(function(){return n.expandSnippetForSelection(e,t)},null,{keepOrder:!0});return r&&e.tabstopManager&&e.tabstopManager.tabNext(),r},this.expandSnippetForSelection=function(e,t){var n,r=e.getCursorPosition(),i=e.session.getLine(r.row),o=i.substring(0,r.column),s=i.substr(r.column),a=this.snippetMap;return this.getActiveScopes(e).some(function(e){var t=a[e];return t&&(n=this.findMatchingSnippet(t,o,s)),!!n},this),n?t&&t.dryRun?!0:(e.session.doc.removeInLine(r.row,r.column-n.replaceBefore.length,r.column+n.replaceAfter.length),this.variables.M__=n.matchBefore,this.variables.T__=n.matchAfter,this.insertSnippetForSelection(e,n.content),this.variables.M__=this.variables.T__=null,!0):!1},this.findMatchingSnippet=function(e,t,n){for(var r=e.length;r--;){var i=e[r];if(!(i.startRe&&!i.startRe.test(t)||i.endRe&&!i.endRe.test(n)||!i.startRe&&!i.endRe))return i.matchBefore=i.startRe?i.startRe.exec(t):[""],i.matchAfter=i.endRe?i.endRe.exec(n):[""],i.replaceBefore=i.triggerRe?i.triggerRe.exec(t)[0]:"",i.replaceAfter=i.endTriggerRe?i.endTriggerRe.exec(n)[0]:"",i}},this.snippetMap={},this.snippetNameMap={},this.register=function(e,t){function r(e){return e&&!/^\^?\(.*\)\$?$|^\\b$/.test(e)&&(e="(?:"+e+")"),e||""}function i(e,t,n){return e=r(e),t=r(t),n?(e=t+e,e&&"$"!=e[e.length-1]&&(e+="$")):(e+=t,e&&"^"!=e[0]&&(e="^"+e)),new RegExp(e)}function o(e){e.scope||(e.scope=t||"_"),t=e.scope,s[t]||(s[t]=[],a[t]={});var r=a[t];if(e.name){var o=r[e.name];o&&u.unregister(o),r[e.name]=e}s[t].push(e),e.tabTrigger&&!e.trigger&&(!e.guard&&/^\w/.test(e.tabTrigger)&&(e.guard="\\b"),e.trigger=n.escapeRegExp(e.tabTrigger)),e.startRe=i(e.trigger,e.guard,!0),e.triggerRe=new RegExp(e.trigger,"",!0),e.endRe=i(e.endTrigger,e.endGuard,!0),e.endTriggerRe=new RegExp(e.endTrigger,"",!0)}var s=this.snippetMap,a=this.snippetNameMap,u=this;e||(e=[]),e&&e.content?o(e):Array.isArray(e)&&e.forEach(o),this._signal("registerSnippets",{scope:t})},this.unregister=function(e,t){function n(e){var n=i[e.scope||t];if(n&&n[e.name]){delete n[e.name];var o=r[e.scope||t],s=o&&o.indexOf(e);s>=0&&o.splice(s,1)}}var r=this.snippetMap,i=this.snippetNameMap;e.content?n(e):Array.isArray(e)&&e.forEach(n)},this.parseSnippetFile=function(e){e=e.replace(/\r/g,"");for(var t,n=[],r={},i=/^#.*|^({[\s\S]*})\s*$|^(\S+) (.*)$|^((?:\n*\t.*)+)/gm;t=i.exec(e);){if(t[1])try{r=JSON.parse(t[1]),n.push(r)}catch(o){}if(t[4])r.content=t[4].replace(/^\t/gm,""),n.push(r),r={};else{var s=t[2],a=t[3];if("regex"==s){var u=/\/((?:[^\/\\]|\\.)*)|$/g;r.guard=u.exec(a)[1],r.trigger=u.exec(a)[1],r.endTrigger=u.exec(a)[1],r.endGuard=u.exec(a)[1]}else"snippet"==s?(r.tabTrigger=a.match(/^\S*/)[0],r.name||(r.name=a)):r[s]=a}}return n},this.getSnippetByName=function(e,t){var n,r=this.snippetNameMap;return this.getActiveScopes(t).some(function(t){var i=r[t];return i&&(n=i[e]),!!n},this),n}}).call(u.prototype);var l=function(e){return e.tabstopManager?e.tabstopManager:(e.tabstopManager=this,this.$onChange=this.onChange.bind(this),this.$onChangeSelection=n.delayedCall(this.onChangeSelection.bind(this)).schedule,this.$onChangeSession=this.onChangeSession.bind(this),this.$onAfterExec=this.onAfterExec.bind(this),void this.attach(e))};(function(){this.attach=function(e){this.index=0,this.ranges=[],this.tabstops=[],this.$openTabstops=null,this.selectedTabstop=null,this.editor=e,this.editor.on("change",this.$onChange),this.editor.on("changeSelection",this.$onChangeSelection),this.editor.on("changeSession",this.$onChangeSession),this.editor.commands.on("afterExec",this.$onAfterExec),this.editor.keyBinding.addKeyboardHandler(this.keyboardHandler)},this.detach=function(){this.tabstops.forEach(this.removeTabstopMarkers,this),this.ranges=null,this.tabstops=null,this.selectedTabstop=null,this.editor.removeListener("change",this.$onChange),this.editor.removeListener("changeSelection",this.$onChangeSelection),this.editor.removeListener("changeSession",this.$onChangeSession),this.editor.commands.removeListener("afterExec",this.$onAfterExec),this.editor.keyBinding.removeKeyboardHandler(this.keyboardHandler),this.editor.tabstopManager=null,this.editor=null},this.onChange=function(e){var t=e.data.range,n="r"==e.data.action[0],r=t.start,i=t.end,o=r.row,s=i.row,u=s-o,l=i.column-r.column;if(n&&(u=-u,l=-l),!this.$inChange&&n){var c=this.selectedTabstop,p=c&&!c.some(function(e){return a(e.start,r)<=0&&a(e.end,i)>=0});if(p)return this.detach()}for(var d=this.ranges,f=0;f<d.length;f++){var h=d[f];h.end.row<r.row||(n&&a(r,h.start)<0&&a(i,h.end)>0?(this.removeRange(h),f--):(h.start.row==o&&h.start.column>r.column&&(h.start.column+=l),h.end.row==o&&h.end.column>=r.column&&(h.end.column+=l),h.start.row>=o&&(h.start.row+=u),h.end.row>=o&&(h.end.row+=u),a(h.start,h.end)>0&&this.removeRange(h)))}d.length||this.detach()},this.updateLinkedFields=function(){var e=this.selectedTabstop;if(e&&e.hasLinkedRanges){this.$inChange=!0;for(var t=this.editor.session,n=t.getTextRange(e.firstNonLinked),r=e.length;r--;){var i=e[r];if(i.linked){var o=exports.snippetManager.tmStrFormat(n,i.original);t.replace(i,o)}}this.$inChange=!1}},this.onAfterExec=function(e){e.command&&!e.command.readOnly&&this.updateLinkedFields()},this.onChangeSelection=function(){if(this.editor){for(var e=this.editor.selection.lead,t=this.editor.selection.anchor,n=this.editor.selection.isEmpty(),r=this.ranges.length;r--;)if(!this.ranges[r].linked){var i=this.ranges[r].contains(e.row,e.column),o=n||this.ranges[r].contains(t.row,t.column);if(i&&o)return}this.detach()}},this.onChangeSession=function(){this.detach()},this.tabNext=function(e){var t=this.tabstops.length,n=this.index+(e||1);n=Math.min(Math.max(n,1),t),n==t&&(n=0),this.selectTabstop(n),0===n&&this.detach()},this.selectTabstop=function(e){this.$openTabstops=null;var t=this.tabstops[this.index];if(t&&this.addTabstopMarkers(t),this.index=e,t=this.tabstops[this.index],t&&t.length){if(this.selectedTabstop=t,this.editor.inVirtualSelectionMode)this.editor.selection.setRange(t.firstNonLinked);else{var n=this.editor.multiSelect;n.toSingleRange(t.firstNonLinked.clone());for(var r=t.length;r--;)t.hasLinkedRanges&&t[r].linked||n.addRange(t[r].clone(),!0);n.ranges[0]&&n.addRange(n.ranges[0].clone())}this.editor.keyBinding.addKeyboardHandler(this.keyboardHandler)}},this.addTabstops=function(e,t,n){if(this.$openTabstops||(this.$openTabstops=[]),!e[0]){var i=r.fromPoints(n,n);d(i.start,t),d(i.end,t),e[0]=[i],e[0].index=0}var o=this.index,s=[o+1,0],a=this.ranges;e.forEach(function(e,n){for(var i=this.$openTabstops[n]||e,o=e.length;o--;){var u=e[o],l=r.fromPoints(u.start,u.end||u.start);p(l.start,t),p(l.end,t),l.original=u,l.tabstop=i,a.push(l),i!=e?i.unshift(l):i[o]=l,u.fmtString?(l.linked=!0,i.hasLinkedRanges=!0):i.firstNonLinked||(i.firstNonLinked=l)}i.firstNonLinked||(i.hasLinkedRanges=!1),i===e&&(s.push(i),this.$openTabstops[n]=i),this.addTabstopMarkers(i)},this),s.length>2&&(this.tabstops.length&&s.push(s.splice(2,1)[0]),this.tabstops.splice.apply(this.tabstops,s))},this.addTabstopMarkers=function(e){var t=this.editor.session;e.forEach(function(e){e.markerId||(e.markerId=t.addMarker(e,"ace_snippet-marker","text"))})},this.removeTabstopMarkers=function(e){var t=this.editor.session;e.forEach(function(e){t.removeMarker(e.markerId),e.markerId=null})},this.removeRange=function(e){var t=e.tabstop.indexOf(e);e.tabstop.splice(t,1),t=this.ranges.indexOf(e),this.ranges.splice(t,1),this.editor.session.removeMarker(e.markerId),e.tabstop.length||(t=this.tabstops.indexOf(e.tabstop),-1!=t&&this.tabstops.splice(t,1),this.tabstops.length||this.detach())},this.keyboardHandler=new o,this.keyboardHandler.bindKeys({Tab:function(e){exports.snippetManager&&exports.snippetManager.expandWithTab(e)||e.tabstopManager.tabNext(1)},"Shift-Tab":function(e){e.tabstopManager.tabNext(-1)},Esc:function(e){e.tabstopManager.detach()},Return:function(){return!1}})}).call(l.prototype);var c={};c.onChange=i.prototype.onChange,c.setPosition=function(e,t){this.pos.row=e,this.pos.column=t},c.update=function(e,t,n){this.$insertRight=n,this.pos=e,this.onChange(t)};var p=function(e,t){0==e.row&&(e.column+=t.column),e.row+=t.row},d=function(e,t){e.row==t.row&&(e.column-=t.column),e.row-=t.row};require("./lib/dom").importCssString(".ace_snippet-marker {    -moz-box-sizing: border-box;    box-sizing: border-box;    background: rgba(194, 193, 208, 0.09);    border: 1px dotted rgba(211, 208, 235, 0.62);    position: absolute;}"),exports.snippetManager=new u;var f=require("./editor").Editor;(function(){this.insertSnippet=function(e,t){return exports.snippetManager.insertSnippet(this,e,t)},this.expandSnippet=function(e){return exports.snippetManager.expandWithTab(this,e)}}).call(f.prototype)}),define("ace/autocomplete/popup",["require","exports","module","ace/edit_session","ace/virtual_renderer","ace/editor","ace/range","ace/lib/event","ace/lib/lang","ace/lib/dom"],function(require,exports){"use strict";var e=(require("../edit_session").EditSession,require("../virtual_renderer").VirtualRenderer),t=require("../editor").Editor,n=require("../range").Range,r=require("../lib/event"),i=require("../lib/lang"),o=require("../lib/dom"),s=function(n){var r=new e(n);r.$maxLines=4;var i=new t(r);return i.setHighlightActiveLine(!1),i.setShowPrintMargin(!1),i.renderer.setShowGutter(!1),i.renderer.setHighlightGutterLine(!1),i.$mouseHandler.$focusWaitTimout=0,i.$highlightTagPending=!0,i},a=function(e){var t=o.createElement("div"),a=new s(t);e&&e.appendChild(t),t.style.display="none",a.renderer.content.style.cursor="default",a.renderer.setStyle("ace_autocomplete"),a.setOption("displayIndentGuides",!1),a.setOption("dragDelay",150);var u=function(){};a.focus=u,a.$isFocused=!0,a.renderer.$cursorLayer.restartTimer=u,a.renderer.$cursorLayer.element.style.opacity=0,a.renderer.$maxLines=8,a.renderer.$keepTextAreaAtCursor=!1,a.setHighlightActiveLine(!1),a.session.highlight(""),a.session.$searchHighlight.clazz="ace_highlight-marker",a.on("mousedown",function(e){var t=e.getDocumentPosition();a.selection.moveToPosition(t),p.start.row=p.end.row=t.row,e.stop()});var l,c=new n(-1,0,-1,1/0),p=new n(-1,0,-1,1/0);p.id=a.session.addMarker(p,"ace_active-line","fullLine"),a.setSelectOnHover=function(e){e?c.id&&(a.session.removeMarker(c.id),c.id=null):c.id=a.session.addMarker(c,"ace_line-hover","fullLine")},a.setSelectOnHover(!1),a.on("mousemove",function(e){if(!l)return void(l=e);if(l.x!=e.x||l.y!=e.y){l=e,l.scrollTop=a.renderer.scrollTop;var t=l.getDocumentPosition().row;c.start.row!=t&&(c.id||a.setRow(t),f(t))}}),a.renderer.on("beforeRender",function(){if(l&&-1!=c.start.row){l.$pos=null;var e=l.getDocumentPosition().row;c.id||a.setRow(e),f(e,!0)}}),a.renderer.on("afterRender",function(){var e=a.getRow(),t=a.renderer.$textLayer,n=t.element.childNodes[e-t.config.firstRow];n!=t.selectedNode&&(t.selectedNode&&o.removeCssClass(t.selectedNode,"ace_selected"),t.selectedNode=n,n&&o.addCssClass(n,"ace_selected"))});var d=function(){f(-1)},f=function(e,t){e!==c.start.row&&(c.start.row=c.end.row=e,t||a.session._emit("changeBackMarker"),a._emit("changeHoverMarker"))};a.getHoveredRow=function(){return c.start.row},r.addListener(a.container,"mouseout",d),a.on("hide",d),a.on("changeSelection",d),a.session.doc.getLength=function(){return a.data.length},a.session.doc.getLine=function(e){var t=a.data[e];return"string"==typeof t?t:t&&t.value||""};var h=a.session.bgTokenizer;return h.$tokenizeRow=function(e){var t=a.data[e],n=[];if(!t)return n;"string"==typeof t&&(t={value:t}),t.caption||(t.caption=t.value||t.name);for(var r,i,o=-1,s=0;s<t.caption.length;s++)i=t.caption[s],r=t.matchMask&1<<s?1:0,o!==r?(n.push({type:t.className||""+(r?"completion-highlight":""),value:i}),o=r):n[n.length-1].value+=i;if(t.meta){var u=a.renderer.$size.scrollerWidth/a.renderer.layerConfig.characterWidth,l=t.meta;l.length+t.caption.length>u-2&&(l=l.substr(0,u-t.caption.length-3)+"…"),n.push({type:"rightAlignedText",value:l})}return n},h.$updateOnChange=u,h.start=u,a.session.$computeWidth=function(){return this.screenWidth=0},a.$blockScrolling=1/0,a.isOpen=!1,a.isTopdown=!1,a.data=[],a.setData=function(e){a.data=e||[],a.setValue(i.stringRepeat("\n",e.length),-1),a.setRow(0)},a.getData=function(e){return a.data[e]},a.getRow=function(){return p.start.row},a.setRow=function(e){e=Math.max(-1,Math.min(this.data.length,e)),p.start.row!=e&&(a.selection.clearSelection(),p.start.row=p.end.row=e||0,a.session._emit("changeBackMarker"),a.moveCursorTo(e||0,0),a.isOpen&&a._signal("select"))},a.on("changeSelection",function(){a.isOpen&&a.setRow(a.selection.lead.row),a.renderer.scrollCursorIntoView()}),a.hide=function(){this.container.style.display="none",this._signal("hide"),a.isOpen=!1},a.show=function(e,t,n){var r=this.container,i=window.innerHeight,o=window.innerWidth,s=this.renderer,u=s.$maxLines*t*1.4,c=e.top+this.$borderSize;c+u>i-t&&!n?(r.style.top="",r.style.bottom=i-c+"px",a.isTopdown=!1):(c+=t,r.style.top=c+"px",r.style.bottom="",a.isTopdown=!0),r.style.display="",this.renderer.$textLayer.checkForSizeChanges();var p=e.left;p+r.offsetWidth>o&&(p=o-r.offsetWidth),r.style.left=p+"px",this._signal("show"),l=null,a.isOpen=!0},a.getTextLeftOffset=function(){return this.$borderSize+this.renderer.$padding+this.$imageSize},a.$imageSize=0,a.$borderSize=1,a};o.importCssString(".ace_editor.ace_autocomplete .ace_marker-layer .ace_active-line {    background-color: #CAD6FA;    z-index: 1;}.ace_editor.ace_autocomplete .ace_line-hover {    border: 1px solid #abbffe;    margin-top: -1px;    background: rgba(233,233,253,0.4);}.ace_editor.ace_autocomplete .ace_line-hover {    position: absolute;    z-index: 2;}.ace_editor.ace_autocomplete .ace_scroller {   background: none;   border: none;   box-shadow: none;}.ace_rightAlignedText {    color: gray;    display: inline-block;    position: absolute;    right: 4px;    text-align: right;    z-index: -1;}.ace_editor.ace_autocomplete .ace_completion-highlight{    color: #000;    text-shadow: 0 0 0.01em;}.ace_editor.ace_autocomplete {    width: 280px;    z-index: 200000;    background: #fbfbfb;    color: #444;    border: 1px lightgray solid;    position: fixed;    box-shadow: 2px 3px 5px rgba(0,0,0,.2);    line-height: 1.4;}"),exports.AcePopup=a}),define("ace/autocomplete/util",["require","exports","module"],function(require,exports){"use strict";exports.parForEach=function(e,t,n){var r=0,i=e.length;0===i&&n();for(var o=0;i>o;o++)t(e[o],function(e,t){r++,r===i&&n(e,t)})};var e=/[a-zA-Z_0-9\$\-\u00A2-\uFFFF]/;exports.retrievePrecedingIdentifier=function(t,n,r){r=r||e;for(var i=[],o=n-1;o>=0&&r.test(t[o]);o--)i.push(t[o]);return i.reverse().join("")},exports.retrieveFollowingIdentifier=function(t,n,r){r=r||e;for(var i=[],o=n;o<t.length&&r.test(t[o]);o++)i.push(t[o]);return i}}),define("ace/autocomplete",["require","exports","module","ace/keyboard/hash_handler","ace/autocomplete/popup","ace/autocomplete/util","ace/lib/event","ace/lib/lang","ace/lib/dom","ace/snippets"],function(require,exports){"use strict";var e=require("./keyboard/hash_handler").HashHandler,t=require("./autocomplete/popup").AcePopup,n=require("./autocomplete/util"),r=(require("./lib/event"),require("./lib/lang")),i=require("./lib/dom"),o=require("./snippets").snippetManager,s=function(){this.autoInsert=!1,this.autoSelect=!0,this.exactMatch=!1,this.gatherCompletionsId=0,this.keyboardHandler=new e,this.keyboardHandler.bindKeys(this.commands),this.blurListener=this.blurListener.bind(this),this.changeListener=this.changeListener.bind(this),this.mousedownListener=this.mousedownListener.bind(this),this.mousewheelListener=this.mousewheelListener.bind(this),this.changeTimer=r.delayedCall(function(){this.updateCompletions(!0)}.bind(this)),this.tooltipTimer=r.delayedCall(this.updateDocTooltip.bind(this),50)};(function(){this.$init=function(){return this.popup=new t(document.body||document.documentElement),this.popup.on("click",function(e){this.insertMatch(),e.stop()}.bind(this)),this.popup.focus=this.editor.focus.bind(this.editor),this.popup.on("show",this.tooltipTimer.bind(null,null)),this.popup.on("select",this.tooltipTimer.bind(null,null)),this.popup.on("changeHoverMarker",this.tooltipTimer.bind(null,null)),this.popup},this.getPopup=function(){return this.popup||this.$init()},this.openPopup=function(e,t,n){this.popup||this.$init(),this.popup.setData(this.completions.filtered),e.keyBinding.addKeyboardHandler(this.keyboardHandler);var r=e.renderer;if(this.popup.setRow(this.autoSelect?0:-1),n)n&&!t&&this.detach();else{this.popup.setTheme(e.getTheme()),this.popup.setFontSize(e.getFontSize());var i=r.layerConfig.lineHeight,o=r.$cursorLayer.getPixelPosition(this.base,!0);o.left-=r.$showGutter?0:35,o.left-=this.popup.getTextLeftOffset();var s=e.container.getBoundingClientRect();o.top+=s.top-r.layerConfig.offset,o.left+=s.left-e.renderer.scrollLeft,o.left+=r.$gutterLayer.gutterWidth,this.popup.show(o,i)}},this.detach=function(){this.editor.keyBinding.removeKeyboardHandler(this.keyboardHandler),this.editor.off("changeSelection",this.changeListener),this.editor.off("blur",this.blurListener),this.editor.off("mousedown",this.mousedownListener),this.editor.off("mousewheel",this.mousewheelListener),this.changeTimer.cancel(),this.hideDocTooltip(),this.gatherCompletionsId+=1,this.popup&&this.popup.isOpen&&this.popup.hide(),this.base&&this.base.detach(),this.activated=!1,this.completions=this.base=null},this.changeListener=function(){var e=this.editor.selection.lead;(e.row!=this.base.row||e.column<this.base.column)&&this.detach(),this.activated?this.changeTimer.schedule():this.detach()},this.blurListener=function(e){var t=document.activeElement,n=this.editor.textInput.getElement();t!=n&&t.parentNode!=this.popup.container&&t!=this.tooltipNode&&e.relatedTarget!=this.tooltipNode&&e.relatedTarget!=n&&this.detach()},this.mousedownListener=function(){this.detach()},this.mousewheelListener=function(){this.detach()},this.goTo=function(e){var t=this.popup.getRow(),n=this.popup.session.getLength()-1;switch(e){case"up":t=0>=t?n:t-1;break;case"down":t=t>=n?-1:t+1;break;case"start":t=0;break;case"end":t=n}this.popup.setRow(t)},this.insertMatch=function(e){if(e||(e=this.popup.getData(this.popup.getRow())),!e)return!1;if(e.completer&&e.completer.insertMatch)e.completer.insertMatch(this.editor,e);else{if(this.completions.filterText)for(var t,n=this.editor.selection.getAllRanges(),r=0;t=n[r];r++)t.start.column-=this.completions.filterText.length,this.editor.session.remove(t);e.snippet?o.insertSnippet(this.editor,e.snippet):this.editor.execCommand("insertstring",e.value||e)}this.detach()},this.commands={Up:function(e){e.completer.goTo("up")},Down:function(e){e.completer.goTo("down")},"Ctrl-Up|Ctrl-Home":function(e){e.completer.goTo("start")},"Ctrl-Down|Ctrl-End":function(e){e.completer.goTo("end")},Esc:function(e){e.completer.detach()},Space:function(e){e.completer.detach(),e.insert(" ")},Return:function(e){return e.completer.insertMatch()},"Shift-Return":function(e){e.completer.insertMatch(!0)},Tab:function(e){var t=e.completer.insertMatch();return t||e.tabstopManager?t:void e.completer.goTo("down")},PageUp:function(e){e.completer.popup.gotoPageUp()},PageDown:function(e){e.completer.popup.gotoPageDown()}},this.gatherCompletions=function(e,t){var r=e.getSession(),i=e.getCursorPosition(),o=r.getLine(i.row),s=n.retrievePrecedingIdentifier(o,i.column);this.base=r.doc.createAnchor(i.row,i.column-s.length),this.base.$insertRight=!0;var a=[],u=e.completers.length;return e.completers.forEach(function(o){o.getCompletions(e,r,i,s,function(i,o){i||(a=a.concat(o));var s=e.getCursorPosition(),l=r.getLine(s.row);t(null,{prefix:n.retrievePrecedingIdentifier(l,s.column,o[0]&&o[0].identifierRegex),matches:a,finished:0===--u})})}),!0},this.showPopup=function(e){this.editor&&this.detach(),this.activated=!0,this.editor=e,e.completer!=this&&(e.completer&&e.completer.detach(),e.completer=this),e.on("changeSelection",this.changeListener),e.on("blur",this.blurListener),e.on("mousedown",this.mousedownListener),e.on("mousewheel",this.mousewheelListener),this.updateCompletions()},this.updateCompletions=function(e){if(e&&this.base&&this.completions){var t=this.editor.getCursorPosition(),n=this.editor.session.getTextRange({start:this.base,end:t});if(n==this.completions.filterText)return;return this.completions.setFilter(n),this.completions.filtered.length&&(1!=this.completions.filtered.length||this.completions.filtered[0].value!=n||this.completions.filtered[0].snippet)?void this.openPopup(this.editor,n,e):this.detach()}var r=this.gatherCompletionsId;this.gatherCompletions(this.editor,function(t,n){var i=function(){return n.finished?this.detach():void 0}.bind(this),o=n.prefix,s=n&&n.matches;if(!s||!s.length)return i();if(0===o.indexOf(n.prefix)&&r==this.gatherCompletionsId){this.completions=new a(s),this.exactMatch&&(this.completions.exactMatch=!0),this.completions.setFilter(o);var u=this.completions.filtered;return u.length&&(1!=u.length||u[0].value!=o||u[0].snippet)?this.autoInsert&&1==u.length&&n.finished?this.insertMatch(u[0]):void this.openPopup(this.editor,o,e):i()}}.bind(this))},this.cancelContextMenu=function(){this.editor.$mouseHandler.cancelContextMenu()},this.updateDocTooltip=function(){var e=this.popup,t=e.data,n=t&&(t[e.getHoveredRow()]||t[e.getRow()]),r=null;return n&&this.editor&&this.popup.isOpen?(this.editor.completers.some(function(e){return e.getDocTooltip&&(r=e.getDocTooltip(n)),r}),r||(r=n),"string"==typeof r&&(r={docText:r}),r&&(r.docHTML||r.docText)?void this.showDocTooltip(r):this.hideDocTooltip()):this.hideDocTooltip()},this.showDocTooltip=function(e){this.tooltipNode||(this.tooltipNode=i.createElement("div"),this.tooltipNode.className="ace_tooltip ace_doc-tooltip",this.tooltipNode.style.margin=0,this.tooltipNode.style.pointerEvents="auto",this.tooltipNode.tabIndex=-1,this.tooltipNode.onblur=this.blurListener.bind(this));var t=this.tooltipNode;e.docHTML?t.innerHTML=e.docHTML:e.docText&&(t.textContent=e.docText),t.parentNode||document.body.appendChild(t);var n=this.popup,r=n.container.getBoundingClientRect();t.style.top=n.container.style.top,t.style.bottom=n.container.style.bottom,window.innerWidth-r.right<320?(t.style.right=window.innerWidth-r.left+"px",t.style.left=""):(t.style.left=r.right+1+"px",t.style.right=""),t.style.display="block"},this.hideDocTooltip=function(){if(this.tooltipTimer.cancel(),this.tooltipNode){var e=this.tooltipNode;this.editor.isFocused()||document.activeElement!=e||this.editor.focus(),this.tooltipNode=null,e.parentNode&&e.parentNode.removeChild(e)}}}).call(s.prototype),s.startCommand={name:"startAutocomplete",exec:function(e){e.completer||(e.completer=new s),e.completer.autoInsert=!1,e.completer.autoSelect=!0,e.completer.showPopup(e),e.completer.cancelContextMenu()},bindKey:"Ctrl-Space|Ctrl-Shift-Space|Alt-Space"};var a=function(e,t){this.all=e,this.filtered=e,this.filterText=t||"",this.exactMatch=!1};(function(){this.setFilter=function(e){if(e.length>this.filterText&&0===e.lastIndexOf(this.filterText,0))var t=this.filtered;else var t=this.all;this.filterText=e,t=this.filterCompletions(t,this.filterText),t=t.sort(function(e,t){return t.score-e.score});var n=null;t=t.filter(function(e){var t=e.snippet||e.caption||e.value;return t===n?!1:(n=t,!0)}),this.filtered=t},this.filterCompletions=function(e,t){var n=[],r=t.toUpperCase(),i=t.toLowerCase();e:for(var o,s=0;o=e[s];s++){var a=o.value||o.caption||o.snippet;if(a){var u,l,c=-1,p=0,d=0;if(this.exactMatch){if(t!==a.substr(0,t.length))continue e}else for(var f=0;f<t.length;f++){var h=a.indexOf(i[f],c+1),m=a.indexOf(r[f],c+1);if(u=h>=0&&(0>m||m>h)?h:m,0>u)continue e;l=u-c-1,l>0&&(-1===c&&(d+=10),d+=l),p|=1<<u,c=u}o.matchMask=p,o.exactMatch=d?0:1,o.score=(o.score||0)-d,n.push(o)}}return n}}).call(a.prototype),exports.Autocomplete=s,exports.FilteredList=a}),define("ace/autocomplete/text_completer",["require","exports","module","ace/range"],function(require,exports){function e(e,t){var i=e.getTextRange(n.fromPoints({row:0,column:0},t));return i.split(r).length-1}function t(t,n){var i=e(t,n),o=t.getValue().split(r),s=Object.create(null),a=o[i];return o.forEach(function(e,t){if(e&&e!==a){var n=Math.abs(i-t),r=o.length-n;s[e]=s[e]?Math.max(r,s[e]):r}}),s}var n=require("../range").Range,r=/[^a-zA-Z_0-9\$\-\u00C0-\u1FFF\u2C00-\uD7FF\w]+/;exports.getCompletions=function(e,n,r,i,o){var s=t(n,r,i),a=Object.keys(s);o(null,a.map(function(e){return{caption:e,value:e,score:s[e],meta:"local"}}))}}),define("ace/ext/language_tools",["require","exports","module","ace/snippets","ace/autocomplete","ace/config","ace/lib/lang","ace/autocomplete/util","ace/autocomplete/text_completer","ace/editor","ace/config"],function(require,exports){"use strict";function e(e){var t,n=e.getCursorPosition(),r=e.session.getLine(n.row);return e.completers.forEach(function(e){e.identifierRegexps&&e.identifierRegexps.forEach(function(e){!t&&e&&(t=o.retrievePrecedingIdentifier(r,n.column,e))})}),t||o.retrievePrecedingIdentifier(r,n.column)}var t=require("../snippets").snippetManager,n=require("../autocomplete").Autocomplete,r=require("../config"),i=require("../lib/lang"),o=require("../autocomplete/util"),s=require("../autocomplete/text_completer"),a={getCompletions:function(e,t,n,r,i){if(t.$mode.completer)return t.$mode.completer.getCompletions(e,t,n,r,i);var o=e.session.getState(n.row),s=t.$mode.getCompletions(o,t,n,r);i(null,s)}},u={getCompletions:function(e,n,r,i,o){var s=t.snippetMap,a=[];t.getActiveScopes(e).forEach(function(e){for(var t=s[e]||[],n=t.length;n--;){var r=t[n],i=r.name||r.tabTrigger;
i&&a.push({caption:i,snippet:r.content,meta:r.tabTrigger&&!r.name?r.tabTrigger+"⇥ ":"snippet",type:"snippet"})}},this),o(null,a)},getDocTooltip:function(e){"snippet"!=e.type||e.docHTML||(e.docHTML=["<b>",i.escapeHTML(e.caption),"</b>","<hr></hr>",i.escapeHTML(e.snippet)].join(""))}},l=[u,s,a];exports.setCompleters=function(e){l=e||[]},exports.addCompleter=function(e){l.push(e)},exports.textCompleter=s,exports.keyWordCompleter=a,exports.snippetCompleter=u;var c={name:"expandSnippet",exec:function(e){return t.expandWithTab(e)},bindKey:"Tab"},p=function(e,t){d(t.session.$mode)},d=function(e){var n=e.$id;t.files||(t.files={}),f(n),e.modes&&e.modes.forEach(d)},f=function(e){if(e&&!t.files[e]){var n=e.replace("mode","snippets");t.files[e]={},r.loadModule(n,function(n){n&&(t.files[e]=n,!n.snippets&&n.snippetText&&(n.snippets=t.parseSnippetFile(n.snippetText)),t.register(n.snippets||[],n.scope),n.includeScopes&&(t.snippetMap[n.scope].includeScopes=n.includeScopes,n.includeScopes.forEach(function(e){f("ace/mode/"+e)})))})}},h=function(t){var r=t.editor,i=(t.args||"",r.completer&&r.completer.activated);if("backspace"===t.command.name)i&&!e(r)&&r.completer.detach();else if("insertstring"===t.command.name){var o=e(r);o&&!i&&(r.completer||(r.completer=new n),r.completer.autoInsert=!1,r.completer.showPopup(r))}},m=require("../editor").Editor;require("../config").defineOptions(m.prototype,"editor",{enableBasicAutocompletion:{set:function(e){e?(this.completers||(this.completers=Array.isArray(e)?e:l),this.commands.addCommand(n.startCommand)):this.commands.removeCommand(n.startCommand)},value:!1},enableLiveAutocompletion:{set:function(e){e?(this.completers||(this.completers=Array.isArray(e)?e:l),this.commands.on("afterExec",h)):this.commands.removeListener("afterExec",h)},value:!1},enableSnippets:{set:function(e){e?(this.commands.addCommand(c),this.on("changeMode",p),p(null,this)):(this.commands.removeCommand(c),this.off("changeMode",p))},value:!1}})});